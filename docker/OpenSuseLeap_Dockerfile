# Dockerfile for OpenSuse Build Enviroment for Ezra Bible App

FROM opensuse/leap:15.2

RUN zypper rr 2
RUN zypper rr 1
RUN zypper clean --all
RUN zypper ref

RUN zypper addrepo https://download.opensuse.org/repositories/home:Marco-GmbH:nodejs:nodejs18/openSUSE_Leap_15.2_Update/home:Marco-GmbH:nodejs:nodejs18.repo
RUN zypper --gpg-auto-import-keys refresh -f

RUN zypper install -y sudo gcc-c++ make vim git subversion cmake rpm-build unzip curl wget
RUN zypper install -y libcurl-devel libicu-devel sqlite3-devel zlib-devel
RUN zypper install -y --force-resolution nodejs18 npm

RUN npm install -g electron-installer-redhat@3.3.0

COPY docker/build_opensuseleap.sh /build.sh

ENTRYPOINT ["/build.sh"]
